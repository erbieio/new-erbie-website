import{r as n,R as N}from"./react-CBAF3Uyv.js";import{a as z}from"./react-dom-CAO6cgV8.js";import{m as B,D as H,a as k,R as Y,u as q,b as G,c as J}from"./react-router-Cg2BjMzq.js";import{c as K,b as Q,E as W}from"./@remix-run-CSnr7utK.js";/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E(){return E=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},E.apply(this,arguments)}function P(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,e)=>{let s=t[e];return a.concat(Array.isArray(s)?s.map(r=>[e,r]):[[e,s]])},[]))}function X(t,a){let e=P(t);return a&&a.forEach((s,r)=>{e.has(r)||a.getAll(r).forEach(o=>{e.append(r,o)})}),e}const Z="6";try{window.__reactRouterVersion=Z}catch(t){}function de(t,a){return K({basename:void 0,future:E({},void 0,{v7_prependBasename:!0}),history:Q({window:void 0}),hydrationData:$(),routes:t,mapRouteProperties:B,unstable_dataStrategy:void 0,window:void 0}).initialize()}function $(){var t;let a=(t=window)==null?void 0:t.__staticRouterHydrationData;return a&&a.errors&&(a=E({},a,{errors:ee(a.errors)})),a}function ee(t){if(!t)return null;let a=Object.entries(t),e={};for(let[s,r]of a)if(r&&r.__type==="RouteErrorResponse")e[s]=new W(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let o=window[r.__subType];if(typeof o=="function")try{let u=new o(r.message);u.stack="",e[s]=u}catch(u){}}if(e[s]==null){let o=new Error(r.message);o.stack="",e[s]=o}}else e[s]=r;return e}const te=n.createContext({isTransitioning:!1}),re=n.createContext(new Map),ne="startTransition",U=N[ne],ae="flushSync",V=z[ae];function se(t){U?U(t):t()}function R(t){V?V(t):t()}class ie{constructor(){this.status="pending",this.promise=new Promise((a,e)=>{this.resolve=s=>{this.status==="pending"&&(this.status="resolved",a(s))},this.reject=s=>{this.status==="pending"&&(this.status="rejected",e(s))}})}}function ve(t){let{fallbackElement:a,router:e,future:s}=t,[r,o]=n.useState(e.state),[u,f]=n.useState(),[d,v]=n.useState({isTransitioning:!1}),[c,_]=n.useState(),[S,y]=n.useState(),[w,x]=n.useState(),T=n.useRef(new Map),{v7_startTransition:C}=s||{},g=n.useCallback(i=>{C?se(i):i()},[C]),F=n.useCallback((i,p)=>{let{deletedFetchers:l,unstable_flushSync:O,unstable_viewTransitionOpts:h}=p;l.forEach(m=>T.current.delete(m)),i.fetchers.forEach((m,M)=>{m.data!==void 0&&T.current.set(M,m.data)});let j=e.window==null||typeof e.window.document.startViewTransition!="function";if(!h||j){O?R(()=>o(i)):g(()=>o(i));return}if(O){R(()=>{S&&(c&&c.resolve(),S.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:h.currentLocation,nextLocation:h.nextLocation})});let m=e.window.document.startViewTransition(()=>{R(()=>o(i))});m.finished.finally(()=>{R(()=>{_(void 0),y(void 0),f(void 0),v({isTransitioning:!1})})}),R(()=>y(m));return}S?(c&&c.resolve(),S.skipTransition(),x({state:i,currentLocation:h.currentLocation,nextLocation:h.nextLocation})):(f(i),v({isTransitioning:!0,flushSync:!1,currentLocation:h.currentLocation,nextLocation:h.nextLocation}))},[e.window,S,c,T,g]);n.useLayoutEffect(()=>e.subscribe(F),[e,F]),n.useEffect(()=>{d.isTransitioning&&!d.flushSync&&_(new ie)},[d]),n.useEffect(()=>{if(c&&u&&e.window){let i=u,p=c.promise,l=e.window.document.startViewTransition(async()=>{g(()=>o(i)),await p});l.finished.finally(()=>{_(void 0),y(void 0),f(void 0),v({isTransitioning:!1})}),y(l)}},[g,u,c,e.window]),n.useEffect(()=>{c&&u&&r.location.key===u.location.key&&c.resolve()},[c,S,r.location,u]),n.useEffect(()=>{!d.isTransitioning&&w&&(f(w.state),v({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),x(void 0))},[d.isTransitioning,w]),n.useEffect(()=>{},[]);let b=n.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:i=>e.navigate(i),push:(i,p,l)=>e.navigate(i,{state:p,preventScrollReset:l==null?void 0:l.preventScrollReset}),replace:(i,p,l)=>e.navigate(i,{replace:!0,state:p,preventScrollReset:l==null?void 0:l.preventScrollReset})}),[e]),L=e.basename||"/",I=n.useMemo(()=>({router:e,navigator:b,static:!1,basename:L}),[e,b,L]);return n.createElement(n.Fragment,null,n.createElement(H.Provider,{value:I},n.createElement(k.Provider,{value:r},n.createElement(re.Provider,{value:T.current},n.createElement(te.Provider,{value:d},n.createElement(Y,{basename:L,location:r.location,navigationType:r.historyAction,navigator:b,future:{v7_relativeSplatPath:e.future.v7_relativeSplatPath}},r.initialized||e.future.v7_partialHydration?n.createElement(oe,{routes:e.routes,future:e.future,state:r}):a))))),null)}function oe(t){let{routes:a,future:e,state:s}=t;return q(a,void 0,s,e)}var A;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(A||(A={}));var D;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(D||(D={}));function pe(t){let a=n.useRef(P(t)),e=n.useRef(!1),s=G(),r=n.useMemo(()=>X(s.search,e.current?null:a.current),[s.search]),o=J(),u=n.useCallback((f,d)=>{const v=P(typeof f=="function"?f(r):f);e.current=!0,o("?"+v,d)},[o,r]);return[r,u]}export{ve as R,de as c,pe as u};

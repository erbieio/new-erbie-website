import{j as e,r as n}from"./react-Dbae-1t-.js";import{b as j,f as A,S as _,g as F,c as E,d as B}from"./index-DPWS70e-.js";import{h as H}from"./moment-CbGOrKEH.js";import{b as w}from"./react-router-CRc4GyLw.js";import{F as S,a as R}from"./antd-CNAC7LZF.js";import{f as d}from"./ethers--KTxgaFs.js";import"./call-bind-4VeKFXIy.js";import"./get-intrinsic-CWn9CxNF.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-D5MMniOg.js";import"./define-data-property-CxeqjjfW.js";import"./es-define-property-DnzLCweE.js";import"./gopd-9AXXY7mE.js";import"./has-property-descriptors-Ck9uAkqi.js";import"./react-dom-RqR84h2O.js";import"./scheduler-D70Pw1t3.js";import"./react-router-dom-n0I-0IF8.js";import"./@remix-run-CSnr7utK.js";import"./react-redux-DP2quqAp.js";import"./use-sync-external-store-BQt0fPyv.js";import"./@reduxjs-C9AHhNnv.js";import"./redux-BxK6wq0X.js";import"./immer-CuGu772C.js";import"./reselect-BDnngDK3.js";import"./redux-thunk-ClJT1hhx.js";import"./react-transition-group-BAxSnyq0.js";import"./@babel-DVGmkmWW.js";import"./dom-helpers-D0mFdbeO.js";import"./axios-BtoyVZBe.js";import"./promise.prototype.finally-DJCfT-IS.js";import"./define-properties-DbWdedhA.js";import"./object-keys-r3t7_5tw.js";import"./es-abstract-CgmC-o8X.js";import"./is-callable-DcnXhopT.js";import"./set-function-name-DTEANxoX.js";import"./functions-have-names-V93JBYlf.js";import"./echarts-CrZI9CbR.js";import"./tslib-BDyQ-Jie.js";import"./zrender-CQaTwPXd.js";import"./rc-util-EzFa6Sk3.js";import"./@ant-design-CpSj2o_1.js";import"./@emotion-CW87jbl0.js";import"./stylis-DsJDcYJc.js";import"./classnames-CwUkGHy7.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@ctrl-4GH61kPu.js";import"./rc-resize-observer-APHP0lmT.js";import"./rc-motion-CHgVpSnu.js";import"./rc-tooltip-CWDKJ352.js";import"./@rc-component-BwJj1XrC.js";import"./rc-overflow-B7atUzjy.js";import"./rc-menu-DstS957B.js";import"./rc-select-DfUtNXTk.js";import"./rc-virtual-list-khs1ZQ38.js";import"./rc-field-form-BVbN0N0C.js";import"./rc-notification-CrSkqE7m.js";import"./rc-table-BHxaoavx.js";import"./rc-tree-Csjy5B6L.js";import"./rc-checkbox-BIqD4YZd.js";import"./rc-pagination-DjL2-7nn.js";import"./rc-picker-CbG8ME25.js";import"./rc-dropdown-BUgfdAv9.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-input-CXG740_T.js";import"./rc-textarea-u6IfKFWK.js";const $="data:image/svg+xml,%3csvg%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5%200C2.23889%200%200%202.23889%200%205C0%207.76111%202.23889%2010%205%2010C7.76111%2010%2010%207.76111%2010%205C10%202.23889%207.76111%200%205%200ZM1.98556%204.83778C1.98556%204.28111%202.43889%203.82778%202.99556%203.82778C3.55222%203.82778%204.00556%204.28111%204.00556%204.83778C4.00556%204.96%203.90556%205.06%203.78333%205.06C3.66111%205.06%203.56111%204.96%203.56111%204.83778C3.56111%204.52556%203.30667%204.27222%202.99556%204.27222C2.68333%204.27222%202.43%204.52667%202.43%204.83778C2.43%204.96%202.33%205.06%202.20778%205.06C2.08556%205.06%201.98556%204.96111%201.98556%204.83778ZM7.72%206.33C7.43444%207.32333%206.32556%208.06333%205%208.06333C3.67444%208.06333%202.56444%207.32333%202.28%206.33C2.20778%206.07778%202.39778%205.82667%202.66%205.82667H7.34111C7.60222%205.82667%207.79222%206.07778%207.72%206.33ZM7.79111%205.06C7.66889%205.06%207.56889%204.96%207.56889%204.83778C7.56889%204.52556%207.31444%204.27222%207.00333%204.27222C6.69222%204.27222%206.43778%204.52667%206.43778%204.83778C6.43778%204.96%206.33778%205.06%206.21556%205.06C6.09333%205.06%205.99333%204.96%205.99333%204.83778C5.99333%204.28111%206.44667%203.82778%207.00333%203.82778C7.56%203.82778%208.01333%204.28111%208.01333%204.83778C8.01333%204.96111%207.91333%205.06%207.79111%205.06Z'%20fill='%23FACB7B'/%3e%3c/svg%3e",I="data:image/svg+xml,%3csvg%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5%200C2.23889%200%200%202.23889%200%205C0%207.76111%202.23889%2010%205%2010C7.76111%2010%2010%207.76111%2010%205C10%202.23889%207.76111%200%205%200ZM7.00222%203.26222C7.43778%203.26222%207.79%203.61556%207.79%204.05C7.79%204.48444%207.43667%204.83778%207.00222%204.83778C6.56778%204.83778%206.21444%204.48444%206.21444%204.05C6.21444%203.61556%206.56667%203.26222%207.00222%203.26222ZM2.99667%203.26222C3.43222%203.26222%203.78444%203.61556%203.78444%204.05C3.78444%204.48444%203.43111%204.83778%202.99667%204.83778C2.56222%204.83778%202.20889%204.48444%202.20889%204.05C2.20889%203.61556%202.56111%203.26222%202.99667%203.26222ZM7.79111%206.47778H2.20778C2.08556%206.47778%201.98556%206.37778%201.98556%206.25556C1.98556%206.13333%202.08556%206.03333%202.20778%206.03333H7.79C7.91222%206.03333%208.01222%206.13333%208.01222%206.25556C8.01222%206.37778%207.91333%206.47778%207.79111%206.47778Z'%20fill='%23D387FF'/%3e%3c/svg%3e",O="data:image/svg+xml,%3csvg%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5%200C2.23889%200%200%202.23889%200%205C0%207.76111%202.23889%2010%205%2010C7.76111%2010%2010%207.76111%2010%205C10%202.23889%207.76111%200%205%200ZM2.21%204.79C2.15667%204.67889%202.20333%204.54667%202.31333%204.49333L3.28222%204.02667L2.30556%203.51C2.19667%203.45222%202.15556%203.31778%202.21333%203.21C2.27111%203.10111%202.40556%203.06%202.51333%203.11778L3.87889%203.84C3.95333%203.87889%203.99889%203.95667%203.99667%204.04111C3.99556%204.12444%203.94667%204.20111%203.87111%204.23667L2.50556%204.89444C2.47444%204.90889%202.44111%204.91667%202.40889%204.91667C2.32778%204.91667%202.24889%204.87%202.21%204.79ZM7.34%207.65222H2.65889C2.39667%207.65222%202.20667%207.40111%202.27889%207.14889C2.56444%206.15556%203.67333%205.41556%204.99889%205.41556C6.32444%205.41556%207.43444%206.15556%207.71889%207.14889C7.79222%207.40111%207.60222%207.65222%207.34%207.65222ZM7.78889%204.79C7.75111%204.86889%207.67111%204.91556%207.58889%204.91556C7.55667%204.91556%207.52333%204.90889%207.49222%204.89333L6.12667%204.23556C6.05111%204.19889%206.00222%204.12333%206.00111%204.04C6%203.95667%206.04556%203.87889%206.11889%203.83889L7.48444%203.11667C7.59333%203.05889%207.72778%203.10111%207.78444%203.20889C7.84222%203.31778%207.8%203.45222%207.69222%203.50889L6.71556%204.02556L7.68444%204.49222C7.79556%204.54667%207.84222%204.68%207.78889%204.79Z'%20fill='%23AD4428'/%3e%3c/svg%3e";function P(l){const c=w(),i=(t,s,o)=>{o.order?o.order==="ascend"?l.sorter("".concat(o.columnKey," ASC")):o.order==="descend"&&l.sorter("".concat(o.columnKey," DESC")):l.sorter("")},p=t=>{if(t<40)return O;if(t>=40&&t<=50)return I;if(t>50)return $},x=t=>{c("/explorer/accountDetail/".concat(t))},r=[{title:"Validator",align:"center",render(t){return e.jsx("div",{className:"link hover:color-#1677ff",onClick:()=>x(t.address),children:j(t.address,6,6)})}},{title:"Total Staking",align:"center",key:"amount",sorter:{multiple:void 0},render(t){return d(t.amount)}},{title:"Total Rewards (ERB)",align:"center",key:"reward",sorter:{multiple:void 0},render(t){return d(t.reward)}},{title:"Time",align:"center",key:"timestamp",sorter:{multiple:void 0},render(t){return H(t.timestamp*1e3).format("YYYY/MM/DD HH:mm:ss")}},{title:"Latest Active",align:"center",key:"block_number",sorter:{multiple:void 0},render(t){return e.jsx("div",{className:"link hover:color-#1677ff",children:t.block_number})}},{title:"Online Weight",key:"weight",sorter:{multiple:void 0},align:"center",render(t){const s=p(t.weight);return e.jsxs("div",{className:"flex items-center justify-center",children:[t.weight," ",e.jsx("img",{src:s,className:"w-1vw ml-8px",alt:""})]})}},{title:"Reputation Score",dataIndex:"score",key:"score",sorter:{multiple:void 0},align:"center"}];return e.jsx("div",{className:"w-100% validator-table  h-100%",children:e.jsx(S,{columns:r,dataSource:l.dataSource,pagination:!1,onChange:i,loading:l.loading})})}function K(l){const c=w(),i=r=>{c("/explorer/accountDetail/".concat(r))},p=(r,t,s)=>{s.order?s.order==="ascend"?l.sorter("".concat(s.columnKey," ASC")):s.order==="descend"&&l.sorter("".concat(s.columnKey," DESC")):l.sorter("")},x=[{title:"Staker Address",align:"center",render(r){return e.jsx("div",{className:"link hover:color-#1677ff",onClick:()=>i(r.address),children:j(r.address,6,6)})}},{title:"Block Height",align:"center",render(r){return e.jsx("div",{className:"link hover:color-#1677ff",children:r.block_number})}},{title:"Stake Value",align:"center",key:"amount",sorter:{multiple:void 0},render(r){return d(r.amount)}},{title:"SNFT Value",align:"center",render(r){return d(r.reward)}},{title:"Stake Time",align:"center",render(r){return r.timestamp?A(r.timestamp):"--"}}];return e.jsx("div",{className:"w-100% staker-table h-100%",children:e.jsx(S,{columns:x,dataSource:l.dataSource,pagination:!1,onChange:p,loading:l.loading})})}function s0(){const[l,c]=n.useState(!1),[i,p]=n.useState(),x=()=>{},r=async()=>{const a=await F();p(a)},t=n.useRef({page:1,page_size:11});let s="",o="";const[N,k]=n.useState(1),[v,b]=n.useState({data:[],total:0}),[f,y]=n.useState({data:[],total:0}),h=async()=>{try{c(!0);const a=await E({...t.current,order:s});b(a)}finally{c(!1)}},C=async()=>{try{const a=await B({...t.current,order:o,name:""});y(a)}finally{c(!1)}};n.useEffect(()=>{h(),r()},[]);const[g,D]=n.useState([{label:"Validator Data",value:1,active:!0},{label:"Staker Data",value:2,active:!1}]),M=n.useMemo(()=>{var a;return(a=g.find(m=>m.active))==null?void 0:a.value},[g]),T=a=>{t.current.page=1,s="",o="";const m=g.map(u=>u);m.forEach(u=>{u.value===a.value?(u.active=!0,k(a.value)):u.active=!1}),D(m),a.value===1?h():C()},L=a=>{s=a,h()},V=a=>{o=a,C()},Z=a=>{t.current.page=a};return e.jsxs("div",{className:"page-validator flex flex-col flex-col-reverse lg:flex-row",children:[e.jsxs("div",{className:"flex-1 flex gap-2vh flex-col",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row mt-20px lg:mt-0",children:[e.jsx("div",{className:"w-35% flex gap-12px",children:g.map(a=>e.jsx("div",{onClick:()=>T(a),className:"flex-1 data-card ".concat(a.active?"active":""),children:a.label},a.value))}),e.jsx("div",{className:"w-100% lg:w-65% mt-20px lg:mt-0",children:e.jsx(_,{className:"lg:ml-12px",onSearch:x})})]}),e.jsx("div",{className:"h-64.6vh flex flex-col",children:e.jsxs("div",{className:"table-box h-100%",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between px-10px pt-10px pb-14px",children:[e.jsx("div",{children:"VALIDATOR INFORMATION"}),e.jsx("div",{children:e.jsx(R,{onChange:Z,current:t.current.page,pageSize:t.current.page_size,total:M===1?v.total:f.total})})]}),e.jsx("div",{className:"flex h-90%",children:N===1?e.jsx(P,{dataSource:v.data,sorter:L,loading:l}):e.jsx(K,{dataSource:f.data,sorter:V,loading:l})})]})})]}),e.jsxs("div",{className:"w-100% lg:w-250px flex flex-wrap gap-22px lg:gap-10px ml-0 lg:ml-22px flex-row lg:flex-col mt-20px lg:mt-0",children:[e.jsx("div",{className:"data-panel",children:e.jsxs("div",{children:[e.jsx("div",{className:"tit",children:"Validator Number"}),e.jsx("div",{className:"val",children:i?i.totalValidator:"--"})]})}),e.jsx("div",{className:"data-panel",children:e.jsxs("div",{children:[e.jsx("div",{className:"tit",children:"Stake of Validator"}),e.jsx("div",{className:"val",children:i?d(i.validatorTotalPledge):0})]})}),e.jsx("div",{className:"data-panel",children:e.jsxs("div",{children:[e.jsx("div",{className:"tit",children:"Staker Number"}),e.jsx("div",{className:"val",children:i?i.totalStaker:"--"})]})}),e.jsx("div",{className:"data-panel",children:e.jsxs("div",{children:[e.jsx("div",{className:"tit",children:"Stake of Staker"}),e.jsx("div",{className:"val",children:i?Number(d(i.totalPledge))-Number(d(i.validatorTotalPledge)):0})]})})]})]})}export{s0 as default};

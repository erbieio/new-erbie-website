System.register(["./@babel-legacy-Hf2i0Sc8.js","./react-legacy-C1KIogah.js","./react-dom-legacy-D5wIYavC.js","./rc-util-legacy-BuYkPS32.js","./classnames-legacy-CuylIhHI.js","./rc-resize-observer-legacy-CoITla2m.js","./rc-motion-legacy-DDL4XNb8.js"],(function(e,t){"use strict";var n,r,o,i,a,u,s,l,c,f,d,p,v,h,m,g,y,b,w,x,E,q,C,F,P,A,M,k,R,O,S,j,N,D;return{setters:[function(e){n=e.c,r=e.f,o=e.d,i=e.e,a=e.i,u=e.j,s=e.a,l=e.b,c=e.k,f=e._,d=e.l,p=e.g,v=e.h},function(e){h=e.r},function(e){m=e.r},function(e){g=e.c,y=e.u,b=e.d,w=e.a,x=e.r,E=e.s,q=e.e,C=e.f,F=e.h,P=e.i,A=e.j,M=e.k,k=e.g,R=e.l,O=e.m,S=e.n},function(e){j=e.c},function(e){N=e.R},function(e){D=e.C}],execute:function(){e({a:function(e){var t=h.createContext(void 0);return{Context:t,Provider:function(e){var r=e.value,o=e.children,i=h.useRef(r);i.current=r;var a=h.useState((function(){return{getValue:function(){return i.current},listeners:new Set}})),u=n(a,1)[0];return y((function(){m.unstable_batchedUpdates((function(){u.listeners.forEach((function(e){e(r)}))}))}),[r]),h.createElement(t.Provider,{value:u},o)},defaultValue:e}}/** e.g. useSelect(userContext) => user */ /** e.g. useSelect(userContext, user => user.name) => user.name */ /** e.g. useSelect(userContext, ['name', 'age']) => user { name, age } */ /** e.g. useSelect(userContext, 'name') => user.name */,c:function(){var e=h.createContext(null);function t(){return h.useContext(e)}return{makeImmutable:function(n,r){var o=E(n),i=function(i,a){var u=o?{ref:a}:{},s=h.useRef(0),l=h.useRef(i);return null!==t()?h.createElement(n,p({},i,u)):(// Always trigger re-render if not provide `notTriggerRender`
r&&!r(l.current,i)||(s.current+=1),l.current=i,h.createElement(e.Provider,{value:s.current},h.createElement(n,p({},i,u))))};return o?h.forwardRef(i):i},responseImmutable:function(e,n){var r=E(e),o=function(n,o){var i=r?{ref:o}:{};return t(),h.createElement(e,p({},n,i))};return r?h.memo(h.forwardRef(o),n):h.memo(o,n)},useImmutableMark:t}},u:function(e,t){var r=P("function"==typeof t?t:function(e){if(void 0===t)return e;if(!Array.isArray(t))return e[t];var n={};return t.forEach((function(t){n[t]=e[t]})),n}),o=h.useContext(null==e?void 0:e.Context),i=o||{},a=i.listeners,u=i.getValue,s=h.useRef();s.current=r(o?u():null==e?void 0:e.defaultValue);var l=h.useState({}),c=n(l,2)[1];return y((function(){if(o)return a.add(e),function(){a.delete(e)};function e(e){var t=r(e);S(s.current,t,!0)||c({})}}),[o]),s.current}});var t=h.createContext(null),L=[],V="rc-util-locker-".concat(Date.now()),T=0;function z(e){var t=!!e,r=h.useState((function(){return T+=1,"".concat(V,"_").concat(T)})),o=n(r,1)[0];y((function(){if(t){var e=b(document.body).width,n=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;w("\nhtml body {\n  overflow-y: hidden;\n  ".concat(n?"width: calc(100% - ".concat(e,"px);"):"","\n}"),o)}else x(o);return function(){x(o)}}),[t,o])}var H=function(e){return!1!==e&&(g()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null)},B=h.forwardRef((function(e,o){var i=e.open,a=e.autoLock,u=e.getContainer;e.debug;var s=e.autoDestroy,l=void 0===s||s,c=e.children,f=h.useState(i),d=n(f,2),p=d[0],v=d[1],b=p||i;h.useEffect((function(){(l||i)&&v(i)}),[i,l]);var w=h.useState((function(){return H(u)})),x=n(w,2),C=x[0],F=x[1];h.useEffect((function(){var e=H(u);F(null!=e?e:null)}));var P=function(e,o){var i=h.useState((function(){return g()?document.createElement("div"):null})),a=n(i,1)[0],u=h.useRef(!1),s=h.useContext(t),l=h.useState(L),c=n(l,2),f=c[0],d=c[1],p=s||(u.current?void 0:function(e){d((function(t){return[e].concat(r(t))}))});function v(){a.parentElement||document.body.appendChild(a),u.current=!0}function m(){var e;null===(e=a.parentElement)||void 0===e||e.removeChild(a),u.current=!1}return y((function(){return e?s?s(v):v():m(),m}),[e]),y((function(){f.length&&(f.forEach((function(e){return e()})),d(L))}),[f]),[a,p]}
/**
       * Test usage export. Do not use in your production
       */(b&&!C),A=n(P,2),M=A[0],k=A[1],R=null!=C?C:M;z(a&&i&&g()&&(R===M||R===document.body));var O=null;c&&E(c)&&o&&(O=c.ref);var S=q(O,o);if(!b||!g()||void 0===C)return null;var j=!1===R||!1,N=c;return o&&(N=h.cloneElement(c,{ref:S})),h.createElement(t.Provider,{value:k},j?N:m.createPortal(N,R))}));function I(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var W=I(),Y=/%[sdj%]/g,X=function(){};function $(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function _(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i=n.length;return"function"==typeof e?e.apply(null,n):"string"==typeof e?e.replace(Y,(function(e){if("%%"===e)return"%";if(o>=i)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(t){return"[Circular]"}break;default:return e}})):e}function J(e,t){return null==e||!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e)}function Z(e,t,n){var r=0,o=e.length;!function i(a){if(a&&a.length)n(a);else{var u=r;r+=1,u<o?t(e[u],i):n([])}}([])}var U=function(e){a(n,e);var t=u(n);function n(e,r){var o;return s(this,n),o=t.call(this,"Async Validation Error"),l(c(o),"errors",void 0),l(c(o),"fields",void 0),o.errors=e,o.fields=r,o}return f(n)}(d(Error));function G(e,t,n,o,i){if(t.first){var a=new Promise((function(t,a){var u=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,r(e[n]||[]))})),t}(e);Z(u,n,(function(e){return o(e),e.length?a(new U(e,$(e))):t(i)}))}));return a.catch((function(e){return e})),a}var u=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,c=0,f=[],d=new Promise((function(t,a){var d=function(e){if(f.push.apply(f,e),++c===l)return o(f),f.length?a(new U(f,$(f))):t(i)};s.length||(o(f),t(i)),s.forEach((function(t){var o=e[t];-1!==u.indexOf(t)?Z(o,n,d):function(e,t,n){var o=[],i=0,a=e.length;function u(e){o.push.apply(o,r(e||[])),++i===a&&n(o)}e.forEach((function(e){t(e,u)}))}(o,n,d)}))}));return d.catch((function(e){return e})),d}function K(e,t){return function(n){var r,o;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(null==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(o=n)&&void 0!==o.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"==typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function Q(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===o(r)&&"object"===o(e[n])?e[n]=i(i({},e[n]),r):e[n]=r}return e}var ee,te="enum",ne=function(e,t,n,r,o,i){!e.required||n.hasOwnProperty(e.field)&&!J(t,i||e.type)||r.push(_(o.messages.required,e.fullField))},re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,oe=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,ie={integer:function(e){return ie.number(e)&&parseInt(e,10)===e},float:function(e){return ie.number(e)&&!ie.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===o(e)&&!ie.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&e.length<=320&&!!e.match(re)},url:function(e){return"string"==typeof e&&e.length<=2048&&!!e.match(function(){if(ee)return ee;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",o=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),// 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),// 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::
"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),// 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::
"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),// 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::
"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),// 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::
"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),// 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::
"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),// 1::              1::3:4:5:6:7:8   1::8            1::
"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],i="(?:".concat(o.join("|"),")").concat("(?:%[0-9a-zA-Z]{1,})?"),a=new RegExp("(?:^".concat(n,"$)|(?:^").concat(i,"$)")),u=new RegExp("^".concat(n,"$")),s=new RegExp("^".concat(i,"$")),l=function(e){return e&&e.exact?a:new RegExp("(?:".concat(t(e)).concat(n).concat(t(e),")|(?:").concat(t(e)).concat(i).concat(t(e),")"),"g")};l.v4=function(e){return e&&e.exact?u:new RegExp("".concat(t(e)).concat(n).concat(t(e)),"g")},l.v6=function(e){return e&&e.exact?s:new RegExp("".concat(t(e)).concat(i).concat(t(e)),"g")};var c=l.v4().source,f=l.v6().source,d="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:localhost|").concat(c,"|").concat(f,"|").concat("(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return ee=new RegExp("(?:^".concat(d,"$)"),"i")}())},hex:function(e){return"string"==typeof e&&!!e.match(oe)}},ae={required:ne,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(_(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,i){if(e.required&&void 0===t)ne(e,t,n,r,i);else{var a=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(a)>-1?ie[a](t)||r.push(_(i.messages.types[a],e.fullField,e.type)):a&&o(t)!==e.type&&r.push(_(i.messages.types[a],e.fullField,e.type))}},range:function(e,t,n,r,o){var i="number"==typeof e.len,a="number"==typeof e.min,u="number"==typeof e.max,s=t,l=null,c="number"==typeof t,f="string"==typeof t,d=Array.isArray(t);// if the value is not of a supported type for range validation
// the validation rule rule should use the
// type property to also test for a particular type
if(c?l="number":f?l="string":d&&(l="array"),!l)return!1;d&&(s=t.length),f&&(// 处理码点大于U+010000的文字length属性不准确的bug，如"𠮷𠮷𠮷".length !== 3
s=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?s!==e.len&&r.push(_(o.messages[l].len,e.fullField,e.len)):a&&!u&&s<e.min?r.push(_(o.messages[l].min,e.fullField,e.min)):u&&!a&&s>e.max?r.push(_(o.messages[l].max,e.fullField,e.max)):a&&u&&(s<e.min||s>e.max)&&r.push(_(o.messages[l].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e[te]=Array.isArray(e[te])?e[te]:[],-1===e[te].indexOf(t)&&r.push(_(o.messages[te],e.fullField,e[te].join(", ")))},pattern:function(e,t,n,r,o){e.pattern&&(e.pattern instanceof RegExp?(// if a RegExp instance is passed, reset `lastIndex` in case its `global`
// flag is accidentally set to `true`, which in a validation scenario
// is not necessary and the result might be misleading
e.pattern.lastIndex=0,e.pattern.test(t)||r.push(_(o.messages.pattern.mismatch,e.fullField,t,e.pattern))):"string"==typeof e.pattern&&(new RegExp(e.pattern).test(t)||r.push(_(o.messages.pattern.mismatch,e.fullField,t,e.pattern))))}},ue=function(e,t,n,r,o){var i=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t,i)&&!e.required)return n();ae.required(e,t,r,a,o,i),J(t,i)||ae.type(e,t,r,a,o)}n(a)},se={string:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t,"string")&&!e.required)return n();ae.required(e,t,r,i,o,"string"),J(t,"string")||(ae.type(e,t,r,i,o),ae.range(e,t,r,i,o),ae.pattern(e,t,r,i,o),!0===e.whitespace&&ae.whitespace(e,t,r,i,o))}n(i)},method:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t)&&!e.required)return n();ae.required(e,t,r,i,o),void 0!==t&&ae.type(e,t,r,i,o)}n(i)},number:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(// eslint-disable-next-line no-param-reassign
t=void 0),J(t)&&!e.required)return n();ae.required(e,t,r,i,o),void 0!==t&&(ae.type(e,t,r,i,o),ae.range(e,t,r,i,o))}n(i)},boolean:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t)&&!e.required)return n();ae.required(e,t,r,i,o),void 0!==t&&ae.type(e,t,r,i,o)}n(i)},regexp:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t)&&!e.required)return n();ae.required(e,t,r,i,o),J(t)||ae.type(e,t,r,i,o)}n(i)},integer:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t)&&!e.required)return n();ae.required(e,t,r,i,o),void 0!==t&&(ae.type(e,t,r,i,o),ae.range(e,t,r,i,o))}n(i)},float:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t)&&!e.required)return n();ae.required(e,t,r,i,o),void 0!==t&&(ae.type(e,t,r,i,o),ae.range(e,t,r,i,o))}n(i)},array:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();ae.required(e,t,r,i,o,"array"),null!=t&&(ae.type(e,t,r,i,o),ae.range(e,t,r,i,o))}n(i)},object:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t)&&!e.required)return n();ae.required(e,t,r,i,o),void 0!==t&&ae.type(e,t,r,i,o)}n(i)},enum:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t)&&!e.required)return n();ae.required(e,t,r,i,o),void 0!==t&&ae.enum(e,t,r,i,o)}n(i)},pattern:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t,"string")&&!e.required)return n();ae.required(e,t,r,i,o),J(t,"string")||ae.pattern(e,t,r,i,o)}n(i)},date:function(e,t,n,r,o){// console.log('integer rule called %j', rule);
var i=[];// console.log('validate on %s value', value);
if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t,"date")&&!e.required)return n();var a;ae.required(e,t,r,i,o),J(t,"date")||(a=t instanceof Date?t:new Date(t),ae.type(e,a,r,i,o),a&&ae.range(e,a.getTime(),r,i,o))}n(i)},url:ue,hex:ue,email:ue,required:function(e,t,n,r,i){var a=[],u=Array.isArray(t)?"array":o(t);ae.required(e,t,r,a,i,u),n(a)},any:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(J(t)&&!e.required)return n();ae.required(e,t,r,i,o)}n(i)}},le=e("S",function(){function e(t){s(this,e),// ======================== Instance ========================
l(this,"rules",null),l(this,"_messages",W),this.define(t)}return f(e,[{key:"define",value:function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==o(e)||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))}},{key:"messages",value:function(e){return e&&(this._messages=Q(I(),e)),this._messages}},{key:"validate",value:function(t){var n=this,a=t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("function"==typeof u&&(s=u,u={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,a),Promise.resolve(a);if(u.messages){var l=this.messages();l===W&&(l=I()),Q(l,u.messages),u.messages=l}else u.messages=this.messages();var c={};(u.keys||Object.keys(this.rules)).forEach((function(e){var r=n.rules[e],u=a[e];r.forEach((function(r){var s=r;"function"==typeof s.transform&&(a===t&&(a=i({},a)),null!=(u=a[e]=s.transform(u))&&(s.type=s.type||(Array.isArray(u)?"array":o(u)))),// Fill validator. Skip if nothing need to validate
(s="function"==typeof s?{validator:s}:i({},s)).validator=n.getValidationMethod(s),s.validator&&(s.field=e,s.fullField=s.fullField||e,s.type=n.getType(s),c[e]=c[e]||[],c[e].push({rule:s,value:u,source:a,field:e}))}))}));var f={};return G(c,u,(function(t,n){var s,l=t.rule,c=!("object"!==l.type&&"array"!==l.type||"object"!==o(l.fields)&&"object"!==o(l.defaultField));function d(e,t){return i(i({},t),{},{fullField:"".concat(l.fullField,".").concat(e),fullFields:l.fullFields?[].concat(r(l.fullFields),[e]):[e]})}function p(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=Array.isArray(o)?o:[o];!u.suppressWarning&&s.length&&e.warning("async-validator:",s),s.length&&void 0!==l.message&&(s=[].concat(l.message));// Fill error info
var p=s.map(K(l,a));if(u.first&&p.length)return f[l.field]=1,n(p);if(c){// if rule is required but the target object
// does not exist fail at the rule level and don't
// go deeper
if(l.required&&!t.value)return void 0!==l.message?p=[].concat(l.message).map(K(l,a)):u.error&&(p=[u.error(l,_(u.messages.required,l.field))]),n(p);var v={};l.defaultField&&Object.keys(t.value).map((function(e){v[e]=l.defaultField})),v=i(i({},v),t.rule.fields);var h={};Object.keys(v).forEach((function(e){var t=v[e],n=Array.isArray(t)?t:[t];h[e]=n.map(d.bind(null,e))}));var m=new e(h);m.messages(u.messages),t.rule.options&&(t.rule.options.messages=u.messages,t.rule.options.error=u.error),m.validate(t.value,t.rule.options||u,(function(e){var t=[];p&&p.length&&t.push.apply(t,r(p)),e&&e.length&&t.push.apply(t,r(e)),n(t.length?t:null)}))}else n(p)}if(c=c&&(l.required||!l.required&&t.value),l.field=t.field,l.asyncValidator)s=l.asyncValidator(l,t.value,p,t.source,u);else if(l.validator){try{s=l.validator(l,t.value,p,t.source,u)}catch(m){var v,h;null===(v=(h=console).error)||void 0===v||v.call(h,m),// rethrow to report error
u.suppressValidatorError||setTimeout((function(){throw m}),0),p(m.message)}!0===s?p():!1===s?p("function"==typeof l.message?l.message(l.fullField||l.field):l.message||"".concat(l.fullField||l.field," fails")):s instanceof Array?p(s):s instanceof Error&&p(s.message)}s&&s.then&&s.then((function(){return p()}),(function(e){return p(e)}))}),(function(e){!function(e){for(var t,n,o=[],i={},u=0;u<e.length;u++)t=e[u],n=void 0,Array.isArray(t)?o=(n=o).concat.apply(n,r(t)):o.push(t);o.length?(i=$(o),s(o,i)):s(null,a)}(e)}),a)}},{key:"getType",value:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!se.hasOwnProperty(e.type))throw new Error(_("Unknown rule type %s",e.type));return e.type||"string"}},{key:"getValidationMethod",value:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?se.required:se[this.getType(e)]||void 0}}]),e}());function ce(e){var t=e.prefixCls,n=e.align,r=e.arrow,o=e.arrowPos,i=r||{},a=i.className,u=i.content,s=o.x,l=void 0===s?0:s,c=o.y,f=void 0===c?0:c,d=h.useRef();// Skip if no align
if(!n||!n.points)return null;var p={position:"absolute"};// Skip if no need to align
if(!1!==n.autoArrow){var v=n.points[0],m=n.points[1],g=v[0],y=v[1],b=m[0],w=m[1];// Top & Bottom
g!==b&&["t","b"].includes(g)?"t"===g?p.top=0:p.bottom=0:p.top=f,// Left & Right
y!==w&&["l","r"].includes(y)?"l"===y?p.left=0:p.right=0:p.left=l}return h.createElement("div",{ref:d,className:j("".concat(t,"-arrow"),a),style:p},u)}function fe(e){var t=e.prefixCls,n=e.open,r=e.zIndex,o=e.mask,i=e.motion;return o?h.createElement(D,p({},i,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return h.createElement("div",{style:{zIndex:r},className:j("".concat(t,"-mask"),n)})})):null}// ========================= Static =========================
l(le,"register",(function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");se[e]=t})),l(le,"warning",X),l(le,"messages",W),l(le,"validators",se);var de=h.memo((function(e){return e.children}),(function(e,t){return t.cache})),pe=h.forwardRef((function(e,t){var r=e.popup,o=e.className,a=e.prefixCls,u=e.style,s=e.target,l=e.onVisibleChanged,c=e.open,f=e.keepDom,d=e.fresh,v=e.onClick,m=e.mask,g=e.arrow,b=e.arrowPos,w=e.align,x=e.motion,E=e.maskMotion,q=e.forceRender,F=e.getPopupContainer,P=e.autoDestroy,A=e.portal,M=e.zIndex,k=e.onMouseEnter,R=e.onMouseLeave,O=e.onPointerEnter,S=e.ready,L=e.offsetX,V=e.offsetY,T=e.offsetR,z=e.offsetB,H=e.onAlign,B=e.onPrepare,I=e.stretch,W=e.targetWidth,Y=e.targetHeight,X="function"==typeof r?r():r,$=c||f,_=(null==F?void 0:F.length)>0,J=h.useState(!F||!_),Z=n(J,2),U=Z[0],G=Z[1];if(y((function(){!U&&_&&s&&G(!0)}),[U,_,s]),!U)return null;var K="auto",Q={left:"-1000vw",top:"-1000vh",right:K,bottom:K};if(S||!c){var ee,te=w.points,ne=w.dynamicInset||(null===(ee=w._experimental)||void 0===ee?void 0:ee.dynamicInset),re=ne&&"r"===te[0][1],oe=ne&&"b"===te[0][0];re?(Q.right=T,Q.left=K):(Q.left=L,Q.right=K),oe?(Q.bottom=z,Q.top=K):(Q.top=V,Q.bottom=K)}var ie={};return I&&(I.includes("height")&&Y?ie.height=Y:I.includes("minHeight")&&Y&&(ie.minHeight=Y),I.includes("width")&&W?ie.width=W:I.includes("minWidth")&&W&&(ie.minWidth=W)),c||(ie.pointerEvents="none"),h.createElement(A,{open:q||$,getContainer:F&&function(){return F(s)},autoDestroy:P},h.createElement(fe,{prefixCls:a,open:c,zIndex:M,mask:m,motion:E}),h.createElement(N,{onResize:H,disabled:!c},(function(e){return h.createElement(D,p({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:q,leavedClassName:"".concat(a,"-hidden")},x,{onAppearPrepare:B,onEnterPrepare:B,visible:c,onVisibleChanged:function(e){var t;null==x||null===(t=x.onVisibleChanged)||void 0===t||t.call(x,e),l(e)}}),(function(n,r){var s=n.className,l=n.style,f=j(a,s,o);return h.createElement("div",{ref:C(e,t,r),className:f,style:i(i(i(i({"--arrow-x":"".concat(b.x||0,"px"),"--arrow-y":"".concat(b.y||0,"px")},Q),ie),l),{},{boxSizing:"border-box",zIndex:M},u),onMouseEnter:k,onMouseLeave:R,onPointerEnter:O,onClick:v},g&&h.createElement(ce,{prefixCls:a,arrow:g,arrowPos:b,align:w}),h.createElement(de,{cache:!c&&!d},X))}))})))})),ve=h.forwardRef((function(e,t){var n=e.children,r=e.getTriggerDOMNode,o=E(n),i=h.useCallback((function(e){F(t,r?r(e):e)}),[r]),a=q(i,n.ref);return o?h.cloneElement(n,{ref:a}):n})),he=h.createContext(null);function me(e){return e?Array.isArray(e)?e:[e]:[]}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}/** @deprecated We should not use this if we can refactor all deps */function ye(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function be(e){return e.ownerDocument.defaultView}
/**
       * Get all the scrollable parent elements of the element
       * @param ele       The element to be detected
       * @param areaOnly  Only return the parent which will cut visible area
       */function we(e){for(var t=[],n=null==e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var o=be(n).getComputedStyle(n);[o.overflowX,o.overflowY,o.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function Ee(e){return xe(parseFloat(e),0)}
/**
       *
       *
       *  **************************************
       *  *              Border                *
       *  *     **************************     *
       *  *     *                  *     *     *
       *  *  B  *                  *  S  *  B  *
       *  *  o  *                  *  c  *  o  *
       *  *  r  *      Content     *  r  *  r  *
       *  *  d  *                  *  o  *  d  *
       *  *  e  *                  *  l  *  e  *
       *  *  r  ********************  l  *  r  *
       *  *     *        Scroll          *     *
       *  *     **************************     *
       *  *              Border                *
       *  **************************************
       *
       */
/**
       * Get visible area of element
       */function qe(e,t){var n=i({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){// Skip if static position which will not affect visible area
var t=be(e).getComputedStyle(e),r=t.overflow,o=t.overflowClipMargin,i=t.borderTopWidth,a=t.borderBottomWidth,u=t.borderLeftWidth,s=t.borderRightWidth,l=e.getBoundingClientRect(),c=e.offsetHeight,f=e.clientHeight,d=e.offsetWidth,p=e.clientWidth,v=Ee(i),h=Ee(a),m=Ee(u),g=Ee(s),y=xe(Math.round(l.width/d*1e3)/1e3),b=xe(Math.round(l.height/c*1e3)/1e3),w=(d-p-m-g)*y,x=(c-f-v-h)*b,E=v*b,q=h*b,C=m*y,F=g*y,P=0,A=0;if("clip"===r){var M=Ee(o);P=M*y,A=M*b}// Region
var k=l.x+C-P,R=l.y+E-A,O=k+l.width+2*P-C-F-w,S=R+l.height+2*A-E-q-x;n.left=Math.max(n.left,k),n.top=Math.max(n.top,R),n.right=Math.min(n.right,O),n.bottom=Math.min(n.bottom,S)}})),n}function Ce(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function Fe(e,t){var r=n(t||[],2),o=r[0],i=r[1];return[Ce(e.width,o),Ce(e.height,i)]}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function Ae(e,t){var n,r=t[0],o=t[1];// Top & Bottom
return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:// Left & Right
"l"===o?e.x:"r"===o?e.x+e.width:e.x+e.width/2,y:n}}function Me(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}var ke=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];e("T",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=h.forwardRef((function(t,o){var a=t.prefixCls,u=void 0===a?"rc-trigger-popup":a,s=t.children,l=t.action,c=void 0===l?"hover":l,f=t.showAction,d=t.hideAction,p=t.popupVisible,m=t.defaultPopupVisible,g=t.onPopupVisibleChange,b=t.afterPopupVisibleChange,w=t.mouseEnterDelay,x=t.mouseLeaveDelay,E=void 0===x?.1:x,q=t.focusDelay,C=t.blurDelay,F=t.mask,S=t.maskClosable,D=void 0===S||S,L=t.getPopupContainer,V=t.forceRender,T=t.autoDestroy,z=t.destroyPopupOnHide,H=t.popup,B=t.popupClassName,I=t.popupStyle,W=t.popupPlacement,Y=t.builtinPlacements,X=void 0===Y?{}:Y,$=t.popupAlign,_=t.zIndex,J=t.stretch,Z=t.getPopupClassNameFromAlign,U=t.fresh,G=t.alignPoint,K=t.onPopupClick,Q=t.onPopupAlign,ee=t.arrow,te=t.popupMotion,ne=t.maskMotion,re=t.popupTransitionName,oe=t.popupAnimation,ie=t.maskTransitionName,ae=t.maskAnimation,ue=t.className,se=t.getTriggerDOMNode,le=v(t,ke),ce=T||z||!1,fe=h.useState(!1),de=n(fe,2),Ee=de[0],Ce=de[1];y((function(){Ce(R())}),[]);var Re=h.useRef({}),Oe=h.useContext(he),Se=h.useMemo((function(){return{registerSubPopup:function(e,t){Re.current[e]=t,null==Oe||Oe.registerSubPopup(e,t)}}}),[Oe]),je=O(),Ne=h.useState(null),De=n(Ne,2),Le=De[0],Ve=De[1],Te=h.useRef(null),ze=P((function(e){Te.current=e,A(e)&&Le!==e&&Ve(e),null==Oe||Oe.registerSubPopup(je,e)})),He=h.useState(null),Be=n(He,2),Ie=Be[0],We=Be[1],Ye=h.useRef(null),Xe=P((function(e){A(e)&&Ie!==e&&(We(e),Ye.current=e)})),$e=h.Children.only(s),_e=(null==$e?void 0:$e.props)||{},Je={},Ze=P((function(e){var t,n,r=Ie;return(null==r?void 0:r.contains(e))||(null===(t=k(r))||void 0===t?void 0:t.host)===e||e===r||(null==Le?void 0:Le.contains(e))||(null===(n=k(Le))||void 0===n?void 0:n.host)===e||e===Le||Object.values(Re.current).some((function(t){return(null==t?void 0:t.contains(e))||e===t}))})),Ue=ye(u,te,oe,re),Ge=ye(u,ne,ae,ie),Ke=h.useState(m||!1),Qe=n(Ke,2),et=Qe[0],tt=Qe[1],nt=null!=p?p:et,rt=P((function(e){void 0===p&&tt(e)}));y((function(){tt(p||!1)}),[p]);var ot=h.useRef(nt);ot.current=nt;var it=h.useRef([]);it.current=[];var at=P((function(e){var t;rt(e),(null!==(t=it.current[it.current.length-1])&&void 0!==t?t:nt)!==e&&(it.current.push(e),null==g||g(e))})),ut=h.useRef(),st=function(){clearTimeout(ut.current)},lt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;st(),0===t?at(e):ut.current=setTimeout((function(){at(e)}),1e3*t)};h.useEffect((function(){return st}),[]);var ct=h.useState(!1),ft=n(ct,2),dt=ft[0],pt=ft[1];y((function(e){e&&!nt||pt(!0)}),[nt]);var vt=h.useState(null),ht=n(vt,2),mt=ht[0],gt=ht[1],yt=h.useState([0,0]),bt=n(yt,2),wt=bt[0],xt=bt[1],Et=function(e){xt([e.clientX,e.clientY])},qt=function(e,t,r,o,a,u,s){var l=h.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[o]||{}}),c=n(l,2),f=c[0],d=c[1],p=h.useRef(0),v=h.useMemo((function(){return t?we(t):[]}),[t]),m=h.useRef({});e||(m.current={});// ========================= Align =========================
var g=P((function(){if(t&&r&&e){// ============== Intersection ===============
// Get area by position. Used for check if flip area is better
var l,c,f,p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q,r=j.x+e,o=j.y+t,i=r+I,a=o+B,u=Math.max(r,n.left),s=Math.max(o,n.top),l=Math.min(i,n.right),c=Math.min(a,n.bottom);return Math.max(0,(l-u)*(c-s))},h=function(){ve=j.y+Ne,he=ve+B,me=j.x+je,ge=me+I},g=t,y=g.ownerDocument,b=be(g).getComputedStyle(g),w=b.width,x=b.height,E=b.position,q=g.style.left,C=g.style.top,F=g.style.right,P=g.style.bottom,k=g.style.overflow,R=i(i({},a[o]),u),O=y.createElement("div");if(null===(l=g.parentElement)||void 0===l||l.appendChild(O),O.style.left="".concat(g.offsetLeft,"px"),O.style.top="".concat(g.offsetTop,"px"),O.style.position=E,O.style.height="".concat(g.offsetHeight,"px"),O.style.width="".concat(g.offsetWidth,"px"),// Reset first
g.style.left="0",g.style.top="0",g.style.right="auto",g.style.bottom="auto",g.style.overflow="hidden",Array.isArray(r))f={x:r[0],y:r[1],width:0,height:0};else{var S=r.getBoundingClientRect();f={x:S.x,y:S.y,width:S.width,height:S.height}}var j=g.getBoundingClientRect(),N=y.documentElement,D=N.clientWidth,L=N.clientHeight,V=N.scrollWidth,T=N.scrollHeight,z=N.scrollTop,H=N.scrollLeft,B=j.height,I=j.width,W=f.height,Y=f.width,X={left:0,top:0,right:D,bottom:L},$={left:-H,top:-z,right:V-H,bottom:T-z},_=R.htmlRegion,J="visible",Z="visibleFirst";"scroll"!==_&&_!==Z&&(_=J);var U=_===Z,G=qe($,v),K=qe(X,v),Q=_===J?K:G,ee=U?K:Q;// Record right & bottom align data
g.style.left="auto",g.style.top="auto",g.style.right="0",g.style.bottom="0";var te=g.getBoundingClientRect();// Reset back
g.style.left=q,g.style.top=C,g.style.right=F,g.style.bottom=P,g.style.overflow=k,null===(c=g.parentElement)||void 0===c||c.removeChild(O);// Calculate scale
var ne=xe(Math.round(I/parseFloat(w)*1e3)/1e3),re=xe(Math.round(B/parseFloat(x)*1e3)/1e3);// No need to align since it's not visible in view
if(0===ne||0===re||A(r)&&!M(r))return;// Offset
var oe=R.offset,ie=R.targetOffset,ae=Fe(j,oe),ue=n(ae,2),se=ue[0],le=ue[1],ce=Fe(f,ie),fe=n(ce,2),de=fe[0],pe=fe[1];f.x-=de,f.y-=pe;// Points
var ve,he,me,ge,ye=R.points||[],we=n(ye,2),Ee=we[0],Ce=Pe(we[1]),ke=Pe(Ee),Re=Ae(f,Ce),Oe=Ae(j,ke),Se=i({},R),je=Re.x-Oe.x+se,Ne=Re.y-Oe.y+le,De=p(je,Ne),Le=p(je,Ne,K),Ve=Ae(f,["t","l"]),Te=Ae(j,["t","l"]),ze=Ae(f,["b","r"]),He=Ae(j,["b","r"]),Be=R.overflow||{},Ie=Be.adjustX,We=Be.adjustY,Ye=Be.shiftX,Xe=Be.shiftY,$e=function(e){return"boolean"==typeof e?e:e>=0};h();// >>>>>>>>>> Top & Bottom
var _e=$e(We),Je=ke[0]===Ce[0];// Bottom to Top
if(_e&&"t"===ke[0]&&(he>ee.bottom||m.current.bt)){var Ze=Ne;Je?Ze-=B-W:Ze=Ve.y-He.y-le;var Ue=p(je,Ze),Ge=p(je,Ze,K);// Of course use larger one
Ue>De||Ue===De&&(!U||// Choose recommend one
Ge>=Le)?(m.current.bt=!0,Ne=Ze,le=-le,Se.points=[Me(ke,0),Me(Ce,0)]):m.current.bt=!1}// Top to Bottom
if(_e&&"b"===ke[0]&&(ve<ee.top||m.current.tb)){var Ke=Ne;Je?Ke+=B-W:Ke=ze.y-Te.y-le;var Qe=p(je,Ke),et=p(je,Ke,K);// Of course use larger one
Qe>De||Qe===De&&(!U||// Choose recommend one
et>=Le)?(m.current.tb=!0,Ne=Ke,le=-le,Se.points=[Me(ke,0),Me(Ce,0)]):m.current.tb=!1}// >>>>>>>>>> Left & Right
var tt=$e(Ie),nt=ke[1]===Ce[1];// >>>>> Flip
// Right to Left
if(tt&&"l"===ke[1]&&(ge>ee.right||m.current.rl)){var rt=je;nt?rt-=I-Y:rt=Ve.x-He.x-se;var ot=p(rt,Ne),it=p(rt,Ne,K);// Of course use larger one
ot>De||ot===De&&(!U||// Choose recommend one
it>=Le)?(m.current.rl=!0,je=rt,se=-se,Se.points=[Me(ke,1),Me(Ce,1)]):m.current.rl=!1}// Left to Right
if(tt&&"r"===ke[1]&&(me<ee.left||m.current.lr)){var at=je;nt?at+=I-Y:at=ze.x-Te.x-se;var ut=p(at,Ne),st=p(at,Ne,K);// Of course use larger one
ut>De||ut===De&&(!U||// Choose recommend one
st>=Le)?(m.current.lr=!0,je=at,se=-se,Se.points=[Me(ke,1),Me(Ce,1)]):m.current.lr=!1}// ============================ Shift ============================
h();var lt=!0===Ye?0:Ye;"number"==typeof lt&&(// Left
me<K.left&&(je-=me-K.left-se,f.x+Y<K.left+lt&&(je+=f.x-K.left+Y-lt)),// Right
ge>K.right&&(je-=ge-K.right-se,f.x>K.right-lt&&(je+=f.x-K.right+lt)));var ct=!0===Xe?0:Xe;"number"==typeof ct&&(// Top
ve<K.top&&(Ne-=ve-K.top-le,// When target if far away from visible area
// Stop shift
f.y+W<K.top+ct&&(Ne+=f.y-K.top+W-ct)),// Bottom
he>K.bottom&&(Ne-=he-K.bottom-le,f.y>K.bottom-ct&&(Ne+=f.y-K.bottom+ct)));// ============================ Arrow ============================
// Arrow center align
var ft=j.x+je,dt=ft+I,pt=j.y+Ne,vt=pt+B,ht=f.x,mt=ht+Y,gt=f.y,yt=gt+W,bt=(Math.max(ft,ht)+Math.min(dt,mt))/2-ft,wt=(Math.max(pt,gt)+Math.min(vt,yt))/2-pt;null==s||s(t,Se);// Additional calculate right & bottom position
var xt=te.right-j.x-(je+j.width),Et=te.bottom-j.y-(Ne+j.height);d({ready:!0,offsetX:je/ne,offsetY:Ne/re,offsetR:xt/ne,offsetB:Et/re,arrowX:bt/ne,arrowY:wt/re,scaleX:ne,scaleY:re,align:Se})}})),b=function(){d((function(e){return i(i({},e),{},{ready:!1})}))};return y(b,[o]),y((function(){e||b()}),[e]),[f.ready,f.offsetX,f.offsetY,f.offsetR,f.offsetB,f.arrowX,f.arrowY,f.scaleX,f.scaleY,f.align,function(){p.current+=1;var e=p.current;// Merge all align requirement into one frame
Promise.resolve().then((function(){p.current===e&&g()}))}]}(nt,Le,G?wt:Ie,W,X,$,Q),Ct=n(qt,11),Ft=Ct[0],Pt=Ct[1],At=Ct[2],Mt=Ct[3],kt=Ct[4],Rt=Ct[5],Ot=Ct[6],St=Ct[7],jt=Ct[8],Nt=Ct[9],Dt=Ct[10],Lt=function(e,t,n,r){return h.useMemo((function(){var o=me(null!=n?n:t),i=me(null!=r?r:t),a=new Set(o),u=new Set(i);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),u.has("hover")&&(u.delete("hover"),u.add("click"))),[a,u]}),[e,t,n,r])}(Ee,c,f,d),Vt=n(Lt,2),Tt=Vt[0],zt=Vt[1],Ht=Tt.has("click"),Bt=zt.has("click")||zt.has("contextMenu"),It=P((function(){dt||Dt()}));!function(e,t,n,o,i){y((function(){if(e&&t&&n){var a=function(){o(),i()},u=n,s=we(t),l=we(u),c=be(u),f=new Set([c].concat(r(s),r(l)));return f.forEach((function(e){e.addEventListener("scroll",a,{passive:!0})})),c.addEventListener("resize",a,{passive:!0}),// First time always do align
o(),function(){f.forEach((function(e){e.removeEventListener("scroll",a),c.removeEventListener("resize",a)}))}}}),[e,t,n])}(nt,Ie,Le,It,(function(){ot.current&&G&&Bt&&lt(!1)})),y((function(){It()}),[wt,W]),y((function(){!nt||null!=X&&X[W]||It()}),[JSON.stringify($)]);var Wt=h.useMemo((function(){var e=function(e,t,n,r){for(var o=n.points,i=Object.keys(e),a=0;a<i.length;a+=1){var u,s=i[a];if(ge(null===(u=e[s])||void 0===u?void 0:u.points,o,r))return"".concat(t,"-placement-").concat(s)}return""}(X,u,Nt,G);return j(e,null==Z?void 0:Z(Nt))}),[Nt,Z,X,u,G]);h.useImperativeHandle(o,(function(){return{nativeElement:Ye.current,popupElement:Te.current,forceAlign:It}}));var Yt=h.useState(0),Xt=n(Yt,2),$t=Xt[0],_t=Xt[1],Jt=h.useState(0),Zt=n(Jt,2),Ut=Zt[0],Gt=Zt[1],Kt=function(){if(J&&Ie){var e=Ie.getBoundingClientRect();_t(e.width),Gt(e.height)}};function Qt(e,t,n,r){Je[e]=function(o){var i;null==r||r(o),lt(t,n);for(var a=arguments.length,u=new Array(a>1?a-1:0),s=1;s<a;s++)u[s-1]=arguments[s];null===(i=_e[e])||void 0===i||i.call.apply(i,[_e,o].concat(u))}}y((function(){mt&&(Dt(),mt(),gt(null))}),[mt]),(Ht||Bt)&&(Je.onClick=function(e){var t;ot.current&&Bt?lt(!1):!ot.current&&Ht&&(Et(e),lt(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=_e.onClick)||void 0===t||t.call.apply(t,[_e,e].concat(r))}),function(e,t,n,r,o,i,a,u){var s=h.useRef(e);s.current=e,h.useEffect((function(){if(t&&r&&(!o||i)){var e=function(e){var t=e.target;s.current&&!a(t)&&u(!1)},l=be(r);l.addEventListener("mousedown",e,!0),l.addEventListener("contextmenu",e,!0);var c=k(n);return c&&(c.addEventListener("mousedown",e,!0),c.addEventListener("contextmenu",e,!0)),function(){l.removeEventListener("mousedown",e,!0),l.removeEventListener("contextmenu",e,!0),c&&(c.removeEventListener("mousedown",e,!0),c.removeEventListener("contextmenu",e,!0))}}}),[t,n,r,o,i])}(nt,Bt,Ie,Le,F,D,Ze,lt);var en,tn,nn=Tt.has("hover"),rn=zt.has("hover");nn&&(Qt("onMouseEnter",!0,w,(function(e){Et(e)})),Qt("onPointerEnter",!0,w,(function(e){Et(e)})),en=function(e){(nt||dt)&&null!=Le&&Le.contains(e.target)&&lt(!0,w)},G&&(Je.onMouseMove=function(e){var t;null===(t=_e.onMouseMove)||void 0===t||t.call(_e,e)})),rn&&(Qt("onMouseLeave",!1,E),Qt("onPointerLeave",!1,E),tn=function(){lt(!1,E)}),Tt.has("focus")&&Qt("onFocus",!0,q),zt.has("focus")&&Qt("onBlur",!1,C),Tt.has("contextMenu")&&(Je.onContextMenu=function(e){var t;ot.current&&zt.has("contextMenu")?lt(!1):(Et(e),lt(!0)),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=_e.onContextMenu)||void 0===t||t.call.apply(t,[_e,e].concat(r))}),ue&&(Je.className=j(_e.className,ue));var on=i(i({},_e),Je),an={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){le[e]&&(an[e]=function(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null===(t=on[e])||void 0===t||t.call.apply(t,[on].concat(r)),le[e].apply(le,r)})}));var un=h.cloneElement($e,i(i({},on),an)),sn={x:Rt,y:Ot},ln=ee?i({},!0!==ee?ee:{}):null;return h.createElement(h.Fragment,null,h.createElement(N,{disabled:!nt,ref:Xe,onResize:function(){Kt(),It()}},h.createElement(ve,{getTriggerDOMNode:se},un)),h.createElement(he.Provider,{value:Se},h.createElement(pe,{portal:e,ref:ze,prefixCls:u,popup:H,className:j(B,Wt),style:I,target:Ie,onMouseEnter:en,onMouseLeave:tn,onPointerEnter:en,zIndex:_,open:nt,keepDom:dt,fresh:U,onClick:K,mask:F,motion:Ue,maskMotion:Ge,onVisibleChanged:function(e){pt(!1),Dt(),null==b||b(e)},onPrepare:function(){return new Promise((function(e){Kt(),gt((function(){return e}))}))},forceRender:V,autoDestroy:ce,getPopupContainer:L,align:Nt,arrow:ln,arrowPos:sn,ready:Ft,offsetX:Pt,offsetY:At,offsetR:Mt,offsetB:kt,onAlign:It,stretch:J,targetWidth:$t/St,targetHeight:Ut/jt})))}));return t}(B))}}}));

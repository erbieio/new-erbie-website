var Y=Object.defineProperty;var tt=(e,t,i)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var v=(e,t,i)=>(tt(e,typeof t!="symbol"?t+"":t,i),i),O=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)};var s=(e,t,i)=>(O(e,t,"read from private field"),i?i.call(e):t.get(e)),b=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},k=(e,t,i,r)=>(O(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i);var u=(e,t,i)=>(O(e,t,"access private method"),i);const et="6.12.1";function j(e,t,i){for(let r in t){let n=t[r];Object.defineProperty(e,r,{enumerable:!0,value:n,writable:!1})}}function x(e){if(e==null)return"null";if(Array.isArray(e))return"[ "+e.map(x).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let i="0x";for(let r=0;r<e.length;r++)i+=t[e[r]>>4],i+=t[e[r]&15];return i}if(typeof e=="object"&&typeof e.toJSON=="function")return x(e.toJSON());switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"number":return e.toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map(i=>"".concat(x(i),": ").concat(x(e[i]))).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function it(e,t,i){let r=e;{const o=[];if(i){if("message"in i||"code"in i||"name"in i)throw new Error("value will overwrite populated values: ".concat(x(i)));for(const c in i){if(c==="shortMessage")continue;const a=i[c];o.push(c+"="+x(a))}}o.push("code=".concat(t)),o.push("version=".concat(et)),o.length&&(e+=" ("+o.join(", ")+")")}let n;switch(t){case"INVALID_ARGUMENT":n=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=new RangeError(e);break;default:n=new Error(e)}return j(n,{code:t}),i&&Object.assign(n,i),n.shortMessage==null&&j(n,{shortMessage:r}),n}function g(e,t,i,r){if(!e)throw it(t,i,r)}function l(e,t,i,r){g(e,t,"INVALID_ARGUMENT",{argument:i,value:r})}["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");e.push(t)}catch(i){}return e},[]);function rt(e,t,i){if(e!==t){let r=i,n="new";r+=".",n+=" "+i,g(!1,"private constructor; use ".concat(r,"from* methods"),"UNSUPPORTED_OPERATION",{operation:n})}}function nt(e,t,i){if(e instanceof Uint8Array)return e;if(typeof e=="string"&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((e.length-2)/2);let n=2;for(let o=0;o<r.length;o++)r[o]=parseInt(e.substring(n,n+2),16),n+=2;return r}l(!1,"invalid BytesLike value",t,e)}function st(e,t){return nt(e,t)}const X=BigInt(0),E=BigInt(1),F=9007199254740991;function D(e,t){const i=Q(e,"value"),r=BigInt($(t,"width"));if(g(i>>r===X,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),i>>r-E){const n=(E<<r)-E;return-((~i&n)+E)}return i}function q(e,t){const i=Q(e,"value"),r=BigInt($(t,"bits"));return i&(E<<r)-E}function K(e,t){switch(typeof e){case"bigint":return e;case"number":return l(Number.isInteger(e),"underflow",t||"value",e),l(e>=-F&&e<=F,"overflow",t||"value",e),BigInt(e);case"string":try{if(e==="")throw new Error("empty string");return e[0]==="-"&&e[1]!=="-"?-BigInt(e.substring(1)):BigInt(e)}catch(i){l(!1,"invalid BigNumberish string: ".concat(i.message),t||"value",e)}}l(!1,"invalid BigNumberish value",t||"value",e)}function Q(e,t){const i=K(e,t);return g(i>=X,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),i}const H="0123456789abcdef";function ot(e){if(e instanceof Uint8Array){let t="0x0";for(const i of e)t+=H[i>>4],t+=H[i&15];return BigInt(t)}return K(e)}function $(e,t){switch(typeof e){case"bigint":return l(e>=-F&&e<=F,"overflow",t||"value",e),Number(e);case"number":return l(Number.isInteger(e),"underflow",t||"value",e),l(e>=-F&&e<=F,"overflow",t||"value",e),e;case"string":try{if(e==="")throw new Error("empty string");return $(BigInt(e),t)}catch(i){l(!1,"invalid numeric string: ".concat(i.message),t||"value",e)}}l(!1,"invalid numeric value",t||"value",e)}const ft=BigInt(-1),d=BigInt(0),S=BigInt(1),ut=BigInt(5),B={};let A="0000";for(;A.length<80;)A+=A;function U(e){let t=A;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function T(e,t,i){const r=BigInt(t.width);if(t.signed){const n=S<<r-S;g(i==null||e>=-n&&e<n,"overflow","NUMERIC_FAULT",{operation:i,fault:"overflow",value:e}),e>d?e=D(q(e,r),r):e=-D(q(-e,r),r)}else{const n=S<<r;g(i==null||e>=0&&e<n,"overflow","NUMERIC_FAULT",{operation:i,fault:"overflow",value:e}),e=(e%n+n)%n&n-S}return e}function V(e){typeof e=="number"&&(e="fixed128x".concat(e));let t=!0,i=128,r=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const o=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);l(o,"invalid fixed format","format",e),t=o[1]!=="u",i=parseInt(o[2]),r=parseInt(o[3])}}else if(e){const o=e,c=(a,R,W)=>o[a]==null?W:(l(typeof o[a]===R,"invalid fixed format ("+a+" not "+R+")","format."+a,o[a]),o[a]);t=c("signed","boolean",t),i=c("width","number",i),r=c("decimals","number",r)}l(i%8===0,"invalid FixedNumber width (not byte aligned)","format.width",i),l(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const n=(t?"":"u")+"fixed"+String(i)+"x"+String(r);return{signed:t,width:i,decimals:r,name:n}}function ct(e,t){let i="";e<d&&(i="-",e*=ft);let r=e.toString();if(t===0)return i+r;for(;r.length<=t;)r=A+r;const n=r.length-t;for(r=r.substring(0,n)+"."+r.substring(n);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return i+r}var m,f,h,N,y,w,p,C,P,L,J,M,Z,_,G;const I=class I{constructor(t,i,r){b(this,N);b(this,w);b(this,C);b(this,L);b(this,M);b(this,_);v(this,"format");b(this,m,void 0);b(this,f,void 0);b(this,h,void 0);v(this,"_value");rt(t,B,"FixedNumber"),k(this,f,i),k(this,m,r);const n=ct(i,r.decimals);j(this,{format:r.name,_value:n}),k(this,h,U(r.decimals))}get signed(){return s(this,m).signed}get width(){return s(this,m).width}get decimals(){return s(this,m).decimals}get value(){return s(this,f)}addUnsafe(t){return u(this,C,P).call(this,t)}add(t){return u(this,C,P).call(this,t,"add")}subUnsafe(t){return u(this,L,J).call(this,t)}sub(t){return u(this,L,J).call(this,t,"sub")}mulUnsafe(t){return u(this,M,Z).call(this,t)}mul(t){return u(this,M,Z).call(this,t,"mul")}mulSignal(t){u(this,N,y).call(this,t);const i=s(this,f)*s(t,f);return g(i%s(this,h)===d,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),u(this,w,p).call(this,i/s(this,h),"mulSignal")}divUnsafe(t){return u(this,_,G).call(this,t)}div(t){return u(this,_,G).call(this,t,"div")}divSignal(t){g(s(t,f)!==d,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),u(this,N,y).call(this,t);const i=s(this,f)*s(this,h);return g(i%s(t,f)===d,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),u(this,w,p).call(this,i/s(t,f),"divSignal")}cmp(t){let i=this.value,r=t.value;const n=this.decimals-t.decimals;return n>0?r*=U(n):n<0&&(i*=U(-n)),i<r?-1:i>r?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=s(this,f);return s(this,f)<d&&(t-=s(this,h)-S),t=s(this,f)/s(this,h)*s(this,h),u(this,w,p).call(this,t,"floor")}ceiling(){let t=s(this,f);return s(this,f)>d&&(t+=s(this,h)-S),t=s(this,f)/s(this,h)*s(this,h),u(this,w,p).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const i=this.decimals-t,r=ut*U(i-1);let n=this.value+r;const o=U(i);return n=n/o*o,T(n,s(this,m),"round"),new I(B,n,s(this,m))}isZero(){return s(this,f)===d}isNegative(){return s(this,f)<d}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return I.fromString(this.toString(),t)}static fromValue(t,i,r){const n=i==null?0:$(i),o=V(r);let c=K(t,"value");const a=n-o.decimals;if(a>0){const R=U(a);g(c%R===d,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),c/=R}else a<0&&(c*=U(-a));return T(c,o,"fromValue"),new I(B,c,o)}static fromString(t,i){const r=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);l(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const n=V(i);let o=r[2]||"0",c=r[3]||"";for(;c.length<n.decimals;)c+=A;g(c.substring(n.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),c=c.substring(0,n.decimals);const a=BigInt(r[1]+o+c);return T(a,n,"fromString"),new I(B,a,n)}static fromBytes(t,i){let r=ot(st(t,"value"));const n=V(i);return n.signed&&(r=D(r,n.width)),T(r,n,"fromBytes"),new I(B,r,n)}};m=new WeakMap,f=new WeakMap,h=new WeakMap,N=new WeakSet,y=function(t){l(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},w=new WeakSet,p=function(t,i){return t=T(t,s(this,m),i),new I(B,t,s(this,m))},C=new WeakSet,P=function(t,i){return u(this,N,y).call(this,t),u(this,w,p).call(this,s(this,f)+s(t,f),i)},L=new WeakSet,J=function(t,i){return u(this,N,y).call(this,t),u(this,w,p).call(this,s(this,f)-s(t,f),i)},M=new WeakSet,Z=function(t,i){return u(this,N,y).call(this,t),u(this,w,p).call(this,s(this,f)*s(t,f)/s(this,h),i)},_=new WeakSet,G=function(t,i){return g(s(t,f)!==d,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),u(this,N,y).call(this,t),u(this,w,p).call(this,s(this,f)*s(this,h)/s(t,f),i)};let z=I;const lt=["wei","kwei","mwei","gwei","szabo","finney","ether"];function at(e,t){let i=18;if(typeof t=="string"){const r=lt.indexOf(t);l(r>=0,"invalid unit","unit",t),i=3*r}else t!=null&&(i=$(t,"unit"));return z.fromValue(e,i,{decimals:i,width:512}).toString()}function gt(e){return at(e,18)}export{at as a,gt as f};
